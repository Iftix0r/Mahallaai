<!DOCTYPE html>
<html lang="uz">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mahalla AI - Digital Mahalla System</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading" class="screen">
            <div class="loader-content">
                <div class="logo-animation">
                    <img src="https://logobank.uz:8005/static/logos_png/Mahalla_vazirligi.png" alt="Mahalla Logo"
                        class="logo">
                </div>
                <h2>Mahalla AI</h2>
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
            </div>
        </div>

        <!-- Selection Screen (Main Menu) -->
        <div id="selection-screen" class="screen hidden">
            <div class="selection-header">
                <h1>Mahalla AI</h1>
                <p>O'zingizga kerakli bo'limni tanlang</p>
            </div>
            <div class="selection-grid">
                <div class="selection-card" onclick="switchTab('system')">
                    <div class="card-glow"></div>
                    <div class="card-icon-large">üè¢</div>
                    <div class="card-text">
                        <h3>Tizimga kirish</h3>
                        <p>Mahalla boshqaruvi va davlat xizmatlari</p>
                    </div>
                </div>
                <div class="selection-card accent" onclick="switchTab('food')">
                    <div class="card-glow"></div>
                    <div class="card-icon-large">üçî</div>
                    <div class="card-text">
                        <h3>Mahalla Fast Food</h3>
                        <p>Eng mazali taomlar va tezkor yetkazib berish</p>
                    </div>
                </div>
                <div class="selection-card taxi" onclick="switchTab('taxi')">
                    <div class="card-glow"></div>
                    <div class="card-icon-large">üöï</div>
                    <div class="card-text">
                        <h3>Mahalla Taxi</h3>
                        <p>Tezkor va arzon taksi xizmati</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard (System) -->
        <div id="dashboard" class="screen hidden">
            <header>
                <div class="user-profile">
                    <button class="back-to-menu" onclick="switchTab('menu')">‚Üê</button>
                    <div class="avatar" id="user-avatar">M</div>
                    <div class="user-info">
                        <h3 id="user-name">Foydalanuvchi</h3>
                        <p id="user-region">Toshkent shahar...</p>
                    </div>
                </div>
                <button class="notification-btn" style="border: none; background: none; font-size: 1.2rem;">
                    üîî
                </button>
            </header>

            <main>
                <section class="banner">
                    <div class="banner-content">
                        <h4>Mahalla AI bilan yanada oson!</h4>
                        <p>Barcha davlat xizmatlari va mahalla yangiliklari endi bitta ilovada.</p>
                        <button class="btn-primary" onclick="switchTab('chat')">AI Yordamchi</button>
                    </div>
                </section>

                <section class="stats-container">
                    <div class="stat-item">
                        <span class="stat-value">1,250</span>
                        <span class="stat-label">Aholi</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">98%</span>
                        <span class="stat-label">Xizmatlar</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value">4.9</span>
                        <span class="stat-label">Reyting</span>
                    </div>
                </section>

                <section class="services-container">
                    <div class="section-title">
                        <h3>Asosiy xizmatlar</h3>
                        <a href="#">Barchasi</a>
                    </div>
                    <div class="grid">
                        <div class="service-card" onclick="openService('certificates')">
                            <div class="card-icon blue">üìÑ</div>
                            <span>Ma'lumotnoma</span>
                        </div>
                        <div class="service-card" onclick="openService('applications')">
                            <div class="card-icon green">üìù</div>
                            <span>Arizalar</span>
                        </div>
                        <div class="service-card" onclick="openService('social')">
                            <div class="card-icon orange">üõ°Ô∏è</div>
                            <span>Ijtimoiy yordam</span>
                        </div>
                        <div class="service-card" onclick="openService('police')">
                            <div class="card-icon purple">‚öñÔ∏è</div>
                            <span>Huquqiy maslahat</span>
                        </div>
                    </div>
                </section>

                <section class="news-container">
                    <div class="section-title">
                        <h3>Mahalla yangiliklari</h3>
                    </div>
                    <div class="news-list">
                        <div class="news-item">
                            <div class="news-thumb"></div>
                            <div class="news-info">
                                <h5>"Obod Mahalla" yangi bosqichda</h5>
                                <p>Mahallamizda yangi suv quvurlari o'tkazish ishlari boshlandi.</p>
                            </div>
                        </div>
                        <div class="news-item">
                            <div class="news-thumb"></div>
                            <div class="news-info">
                                <h5>Haftalik sport musobaqasi</h5>
                                <p>Kelasi yakshanba kuni yoshlar o'rtasida mini-futbol turniri bo'lib o'tadi.</p>
                            </div>
                        </div>
                    </div>
                </section>
            </main>

            <nav class="bottom-nav">
                <div class="nav-item active" onclick="switchTab('system')">
                    <div class="icon">üè†</div>
                    <span>Asosiy</span>
                </div>
                <div class="nav-item" onclick="openService('catalog')">
                    <div class="icon">üìÅ</div>
                    <span>Katalog</span>
                </div>
                <div class="nav-item" onclick="switchTab('chat')">
                    <div class="icon">üí¨</div>
                    <span>Chatbot</span>
                </div>
                <div class="nav-item" onclick="openService('profile')">
                    <div class="icon">üë§</div>
                    <span>Profil</span>
                </div>
            </nav>
        </div>

        <!-- Food App Screen -->
        <div id="food-app" class="screen hidden">
            <header class="food-header">
                <div class="food-header-top">
                    <button class="back-to-menu-dark" onclick="switchTab('menu')">‚Üê</button>
                    <div class="food-location">
                        <span class="loc-icon">üìç</span>
                        <span id="food-user-location">Hozirgi joylashuvingiz</span>
                    </div>
                    <button class="cart-btn">üõí<span class="cart-count">0</span></button>
                </div>
                <div class="search-bar">
                    <input type="text" placeholder="Ovqat yoki restoran qidirish...">
                    <button class="filter-btn">üîç</button>
                </div>
            </header>

            <main class="food-main">
                <section class="food-categories">
                    <div class="cat-item active">üçî Barchasi</div>
                    <div class="cat-item">üçü Fast Food</div>
                    <div class="cat-item">ü•§ Ichimliklar</div>
                    <div class="cat-item">üç∞ Shirinliklar</div>
                    <div class="cat-item">üçï Pitsa</div>
                </section>

                <section class="food-offers">
                    <div class="offer-card">
                        <div class="offer-content">
                            <h3>20% CHEGIRMA</h3>
                            <p>Ilk buyurtmangiz uchun maxsus taklif</p>
                            <button class="btn-offer">Olish</button>
                        </div>
                        <div class="offer-img">
                            <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?auto=format&fit=crop&w=200&q=80"
                                alt="Burger">
                        </div>
                    </div>
                </section>

                <section class="food-nearby">
                    <div class="section-title">
                        <h3>Yaqin atrofdagi joylar</h3>
                        <a href="#">Barchasi</a>
                    </div>
                    <div class="food-grid" id="restaurants-list">
                        <!-- Restaurants will be loaded here -->
                        <div class="rest-card">
                            <div class="rest-img"
                                style="background-image: url('https://images.unsplash.com/photo-1513104890138-7c749659a591?auto=format&fit=crop&w=400&q=80')">
                                <span class="rating">‚≠ê 4.8</span>
                            </div>
                            <div class="rest-info">
                                <h4>Gozzo Pitsa</h4>
                                <p>Pitsa ‚Ä¢ Fast Food ‚Ä¢ 15-20 min</p>
                            </div>
                        </div>
                        <div class="rest-card">
                            <div class="rest-img"
                                style="background-image: url('https://images.unsplash.com/photo-1561758033-d89a9ad46330?auto=format&fit=crop&w=400&q=80')">
                                <span class="rating">‚≠ê 4.5</span>
                            </div>
                            <div class="rest-info">
                                <h4>Max Way</h4>
                                <p>Burger ‚Ä¢ Lavash ‚Ä¢ 10-15 min</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="food-popular">
                    <div class="section-title">
                        <h3>Ommabop taomlar</h3>
                    </div>
                    <div class="popular-list">
                        <div class="food-item-horizontal">
                            <div class="food-thumb"
                                style="background-image: url('https://images.unsplash.com/photo-1594212699903-ec8a3eca50f5?auto=format&fit=crop&w=200&q=80')">
                            </div>
                            <div class="food-details">
                                <h5>Double Cheeseburger</h5>
                                <p>Sershira go'sht va pishloq</p>
                                <div class="price-row">
                                    <span class="price">35 000 so'm</span>
                                    <button class="add-to-cart">+</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <!-- Taxi App Screen -->
        <div id="taxi-app" class="screen hidden">
            <header class="taxi-header">
                <div class="food-header-top">
                    <button class="back-to-menu-dark" onclick="switchTab('menu')">‚Üê</button>
                    <h3 style="font-weight: 700; font-size: 1.1rem;">Mahalla Taxi</h3>
                    <div style="width: 40px;"></div>
                </div>
            </header>

            <main class="taxi-main">
                <!-- Map Placeholder -->
                <div class="taxi-map">
                    <div class="map-overlay">
                        <div class="map-pin">üìç</div>
                        <p>Joylashuvingiz aniqlanmoqda...</p>
                    </div>
                </div>

                <!-- Route Input -->
                <div class="taxi-panel">
                    <div class="route-card">
                        <div class="route-input">
                            <div class="route-dot green"></div>
                            <input type="text" id="taxi-from" placeholder="Qayerdan?" value="Hozirgi joylashuv">
                        </div>
                        <div class="route-line"></div>
                        <div class="route-input">
                            <div class="route-dot red"></div>
                            <input type="text" id="taxi-to" placeholder="Qayerga?">
                        </div>
                    </div>

                    <!-- Car Types -->
                    <div class="car-types">
                        <div class="car-type active">
                            <div class="car-icon">üöó</div>
                            <div class="car-info">
                                <h5>Standart</h5>
                                <span>5 min</span>
                            </div>
                            <div class="car-price">8 000</div>
                        </div>
                        <div class="car-type">
                            <div class="car-icon">üöô</div>
                            <div class="car-info">
                                <h5>Comfort</h5>
                                <span>8 min</span>
                            </div>
                            <div class="car-price">15 000</div>
                        </div>
                        <div class="car-type">
                            <div class="car-icon">üöê</div>
                            <div class="car-info">
                                <h5>Minivan</h5>
                                <span>12 min</span>
                            </div>
                            <div class="car-price">20 000</div>
                        </div>
                    </div>

                    <!-- Order Button -->
                    <button class="taxi-order-btn" onclick="orderTaxi()">
                        Taksi chaqirish
                    </button>
                </div>
            </main>
        </div>

        <!-- AI Assistant Tab -->
        <div id="ai-chat" class="screen hidden">
            <header>
                <div style="display: flex; align-items: center; gap: 15px;">
                    <button onclick="switchTab('system')"
                        style="border: none; background: none; font-size: 1.5rem; cursor: pointer;">‚Üê</button>
                    <h3 style="font-weight: 700;">Mahalla AI Yordamchi</h3>
                </div>
            </header>
            <div class="chat-container" id="chat-messages">
                <div class="message ai">
                    <p>Assalomu alaykum! Men Mahalla AI yordamchisiman. Sizga qanday yordam bera olaman?</p>
                </div>
            </div>
            <div class="chat-input-area">
                <input type="text" placeholder="Xabaringizni yozing..." id="chat-input">
                <button id="send-btn">üöÄ</button>
            </div>
        </div>
        <!-- Profile Setup Modal -->
        <div id="profile-modal" class="modal-backdrop hidden">
            <div class="modal">
                <div class="modal-header">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <div>
                            <h3>Profilni to'ldiring</h3>
                            <p>Xizmatlardan foydalanish uchun hududingizni kiriting</p>
                        </div>
                        <button onclick="closeProfileModal()"
                            style="border: none; background: none; font-size: 1.5rem; cursor: pointer; color: var(--text-muted);">&times;</button>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label>Viloyat / Shaxar</label>
                        <select id="setup-region">
                            <option value="">Tanlang...</option>
                            <option value="Toshkent sh.">Toshkent sh.</option>
                            <option value="Toshkent vil.">Toshkent vil.</option>
                            <option value="Samarqand">Samarqand</option>
                            <option value="Buxoro">Buxoro</option>
                            <option value="Namangan">Namangan</option>
                            <option value="Farg'ona">Farg'ona</option>
                            <option value="Andijon">Andijon</option>
                            <option value="Qashqadaryo">Qashqadaryo</option>
                            <option value="Surxondaryo">Surxondaryo</option>
                            <option value="Jizzax">Jizzax</option>
                            <option value="Sirdaryo">Sirdaryo</option>
                            <option value="Xorazm">Xorazm</option>
                            <option value="Navoiy">Navoiy</option>
                            <option value="Qoraqalpog'iston">Qoraqalpog'iston</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Mahalla nomi</label>
                        <input type="text" id="setup-mahalla" placeholder="Masalan: Alisher Navoiy">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-primary" style="width: 100%;" id="save-profile">Saqlash</button>
                </div>
            </div>
        </div>
    </div>
    <script src="js/app.js"></script>
</body>

</html>